var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

var MiniEventEmitter=function(){};MiniEventEmitter.prototype.each=function(obj,iterator,context){var breaker={};if(obj==null){return}if(Array.prototype.forEach&&obj.forEach===Array.prototype.forEach){obj.forEach(iterator,context)}else{if(obj.length===+obj.length){for(var i=0,l=obj.length;i<l;i++){if(i in obj&&iterator.call(context,obj[i],i,obj)===breaker){return}}}else{for(var key in obj){if(obj.hasOwnProperty(key)){if(iterator.call(context,obj[key],key,obj)===breaker){return}}}}}};MiniEventEmitter.prototype.filter=function(obj,iterator,context){var results=[];if(obj==null){return results}if(Array.prototype.filter&&obj.filter===Array.prototype.filter){return obj.filter(iterator,context)}MiniEventEmitter.prototype.each(obj,function(value,index,list){if(iterator.call(context,value,index,list)){results[results.length]=value}});return results};MiniEventEmitter.prototype.on=function(expr,callback){if(expr instanceof RegExp){this._routes||(this._routes=[]);this._routes.unshift([expr,callback])}else{this._events||(this._events={});this._events[expr]||(this._events[expr]=[]);this._events[expr].unshift(callback)}return this};MiniEventEmitter.prototype.addListener=MiniEventEmitter.prototype.on;MiniEventEmitter.prototype.once=function(event,callback){var self=this;function removeAfter(){self.removeListener(event,removeAfter);callback.apply(this,arguments)}removeAfter.listener=callback;self.on(event,removeAfter);return this};MiniEventEmitter.prototype.when=function(event,callback){var self=this;function check(){if(callback.apply(this,arguments)){self.removeListener(event,check)}}check.listener=callback;self.on(event,check);return this};MiniEventEmitter.prototype.removeListener=function(expr,callback){if(expr instanceof RegExp&&this._routes){this._routes=MiniEventEmitter.prototype.filter(this._routes,function(value){return !(value[0].toString()==expr.toString()&&(value[1]===callback||(value[1].listener&&value[1].listener===callback)))})}else{if(this._events&&this._events[expr]){this._events[expr]=MiniEventEmitter.prototype.filter(this._events[expr],function(value){return !(value===callback||(value.listener&&value.listener===callback))})}}return this};MiniEventEmitter.prototype.removeAllListeners=function(expr){if(arguments.length===0){this._events={};this._routes=[];return}if(expr instanceof RegExp&&this._routes){this._routes=MiniEventEmitter.prototype.filter(this._routes,function(value){return !(value[0].toString()==expr.toString())})}else{if(this._events&&this._events[expr]){this._events[expr]=[]}}return this};MiniEventEmitter.prototype.emit=function(event){var args=Array.prototype.slice.call(arguments,1);if(this._events&&this._events[event]){for(var i=this._events[event].length-1;i>-1&&this._events[event]&&this._events[event][i];i--){this._events[event][i].apply(this,args)}}if(this._routes){for(var i=this._routes.length-1;i>-1;i--){if(this._routes[i][0].test(event)){this._routes[i][1].apply(this,args)}}}return this};MiniEventEmitter.mixin=function(destObject){var props=["on","removeListener","removeAllListeners","emit","next","once","when"];for(var i=0;i<props.length;i++){destObject.prototype[props[i]]=MiniEventEmitter.prototype[props[i]]}};(function(){var global=this;function debug(){return debug}function require(p,parent){var path=require.resolve(p),mod=require.modules[path];if(!mod){throw new Error('failed to require "'+p+'" from '+parent)}if(!mod.exports){mod.exports={};mod.call(mod.exports,mod,mod.exports,require.relative(path),global)}return mod.exports}require.modules={};require.resolve=function(path){var orig=path,reg=path+".js",index=path+"/index.js";return require.modules[reg]&&reg||require.modules[index]&&index||orig};require.register=function(path,fn){require.modules[path]=fn};require.relative=function(parent){return function(p){if("debug"==p){return debug}if("."!=p.charAt(0)){return require(p)}var path=parent.split("https://web.archive.org/"),segs=p.split("https://web.archive.org/");path.pop();for(var i=0;i<segs.length;i++){var seg=segs[i];if(".."==seg){path.pop()}else{if("."!=seg){path.push(seg)}}}return require(path.join("https://web.archive.org/"),parent)}};require.register("engine.io-client.html",function(module,exports,require,global){exports.version="0.2.2";exports.protocol=1;exports.util=require("./util");exports.parser=require("./parser");exports.Socket=require("./socket");exports.EventEmitter=require("./event-emitter");exports.Transport=require("./transport");exports.transports=require("./transports")});require.register("event-emitter.html",function(module,exports,require,global){module.exports=EventEmitter;function EventEmitter(){}EventEmitter.prototype.on=function(name,fn){if(!this.$events){this.$events={}}if(!this.$events[name]){this.$events[name]=fn}else{if(isArray(this.$events[name])){this.$events[name].push(fn)}else{this.$events[name]=[this.$events[name],fn]}}return this};EventEmitter.prototype.addListener=EventEmitter.prototype.on;EventEmitter.prototype.once=function(name,fn){var self=this;function on(){self.removeListener(name,on);fn.apply(this,arguments)}on.listener=fn;this.on(name,on);return this};EventEmitter.prototype.removeListener=function(name,fn){if(this.$events&&this.$events[name]){var list=this.$events[name];if(isArray(list)){var pos=-1;for(var i=0,l=list.length;i<l;i++){if(list[i]===fn||(list[i].listener&&list[i].listener===fn)){pos=i;break}}if(pos<0){return this}list.splice(pos,1);if(!list.length){delete this.$events[name]}}else{if(list===fn||(list.listener&&list.listener===fn)){delete this.$events[name]}}}return this};EventEmitter.prototype.removeAllListeners=function(name){if(name===undefined){this.$events={};return this}if(this.$events&&this.$events[name]){this.$events[name]=null}return this};EventEmitter.prototype.listeners=function(name){if(!this.$events){this.$events={}}if(!this.$events[name]){this.$events[name]=[]}if(!isArray(this.$events[name])){this.$events[name]=[this.$events[name]]}return this.$events[name]};EventEmitter.prototype.emit=function(name){if(!this.$events){return false}var handler=this.$events[name];if(!handler){return false}var args=Array.prototype.slice.call(arguments,1);if("function"==typeof handler){handler.apply(this,args)}else{if(isArray(handler)){var listeners=handler.slice();for(var i=0,l=listeners.length;i<l;i++){listeners[i].apply(this,args)}}else{return false}}return true};function isArray(obj){return"[object Array]"==Object.prototype.toString.call(obj)}EventEmitter.prototype.addEventListener=EventEmitter.prototype.on;EventEmitter.prototype.removeEventListener=EventEmitter.prototype.removeListener;EventEmitter.prototype.dispatchEvent=EventEmitter.prototype.emit});require.register("parser.html",function(module,exports,require,global){var util=require("./util");var packets=exports.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6};var packetslist=util.keys(packets);var err={type:"error",data:"parser error"};exports.encodePacket=function(packet){var encoded=packets[packet.type];if(undefined!==packet.data){encoded+=String(packet.data)}return""+encoded};exports.decodePacket=function(data){var type=data.charAt(0);if(Number(type)!=type||!packetslist[type]){return err}if(data.length>1){return{type:packetslist[type],data:data.substring(1)}}else{return{type:packetslist[type]}}};exports.encodePayload=function(packets){if(!packets.length){return"0:"}var encoded="",message;for(var i=0,l=packets.length;i<l;i++){message=exports.encodePacket(packets[i]);encoded+=message.length+":"+message}return encoded};exports.decodePayload=function(data){if(data==""){return[err]}var packets=[],length="",n,msg,packet;for(var i=0,l=data.length;i<l;i++){var chr=data.charAt(i);if(":"!=chr){length+=chr}else{if(""==length||(length!=(n=Number(length)))){return[err]}msg=data.substr(i+1,n);if(length!=msg.length){return[err]}if(msg.length){packet=exports.decodePacket(msg);if(err.type==packet.type&&err.data==packet.data){return[err]}packets.push(packet)}i+=n;length=""}}if(length!=""){return[err]}return packets}});require.register("socket.html",function(module,exports,require,global){var util=require("./util"),transports=require("./transports"),debug=require("debug")("engine-client:socket"),EventEmitter=require("./event-emitter");module.exports=Socket;function Socket(opts){if("string"==typeof opts){var uri=util.parseUri(opts);opts=arguments[1]||{};opts.host=uri.host;opts.secure=uri.scheme=="https"||uri.scheme=="wss";opts.port=uri.port||(opts.secure?443:80)}opts=opts||{};this.secure=opts.secure||false;this.host=opts.host||opts.hostname||"localhost";this.port=opts.port||80;this.query=opts.query||{};this.query.uid=rnd();this.upgrade=false!==opts.upgrade;this.resource=opts.resource||"default";this.path=(opts.path||"/engine.io").replace(/\/$/,"");this.path+="/"+this.resource+"/";this.forceJSONP=!!opts.forceJSONP;this.timestampParam=opts.timestampParam||"t";this.timestampRequests=!!opts.timestampRequests;this.flashPath=opts.flashPath||"";this.transports=opts.transports||["polling","websocket","flashsocket"];this.readyState="";this.writeBuffer=[];this.policyPort=opts.policyPort||843;this.open()}util.inherits(Socket,EventEmitter);Socket.prototype.createTransport=function(name){debug('creating transport "%s"',name);var query=clone(this.query);query.transport=name;if(this.id){query.sid=this.id}var transport=new transports[name]({host:this.host,port:this.port,secure:this.secure,path:this.path,query:query,forceJSONP:this.forceJSONP,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,flashPath:this.flashPath,policyPort:this.policyPort});return transport};function clone(obj){var o={};for(var i in obj){if(obj.hasOwnProperty(i)){o[i]=obj[i]}}return o}Socket.prototype.open=function(){this.readyState="opening";var transport=this.createTransport(this.transports[0]);transport.open();this.setTransport(transport)};Socket.prototype.setTransport=function(transport){var self=this;if(this.transport){debug("clearing existing transport");this.transport.removeAllListeners()}this.transport=transport;transport.on("drain",function(){self.flush()}).on("packet",function(packet){self.onPacket(packet)}).on("error",function(e){self.onError(e)}).on("close",function(){self.onClose("transport close")})};Socket.prototype.probe=function(name){debug('probing transport "%s"',name);var transport=this.createTransport(name,{probe:1}),self=this;transport.once("open",function(){debug('probe transport "%s" opened',name);transport.send([{type:"ping",data:"probe"}]);transport.once("packet",function(msg){if("pong"==msg.type&&"probe"==msg.data){debug('probe transport "%s" pong',name);self.upgrading=true;self.emit("upgrading",transport);debug('pausing current transport "%s"',self.transport.name);self.transport.pause(function(){if("closed"==self.readyState||"closing"==self.readyState){return}debug("changing transport and sending upgrade packet");self.emit("upgrade",transport);self.setTransport(transport);transport.send([{type:"upgrade"}]);transport=null;self.upgrading=false;self.flush()})}else{debug('probe transport "%s" failed',name);var err=new Error("probe error");err.transport=transport.name;self.emit("error",err)}})});transport.open();this.once("close",function(){if(transport){debug("socket closed prematurely - aborting probe");transport.close();transport=null}});this.once("upgrading",function(to){if(transport&&to.name!=transport.name){debug('"%s" works - aborting "%s"',to.name,transport.name);transport.close();transport=null}})};Socket.prototype.onOpen=function(){debug("socket open");this.readyState="open";this.emit("open");this.onopen&&this.onopen.call(this);this.flush();if(this.upgrade&&this.transport.pause){debug("starting upgrade probes");for(var i=0,l=this.upgrades.length;i<l;i++){this.probe(this.upgrades[i])}}};Socket.prototype.onPacket=function(packet){if("opening"==this.readyState||"open"==this.readyState){debug('socket receive: type "%s", data "%s"',packet.type,packet.data);switch(packet.type){case"open":this.onHandshake(util.parseJSON(packet.data));break;case"ping":this.sendPacket("pong");this.setPingTimeout();break;case"error":var err=new Error("server error");err.code=packet.data;this.emit("error",err);break;case"message":this.emit("message",packet.data);var event={data:packet.data};event.toString=function(){return packet.data};this.onmessage&&this.onmessage.call(this,event);break}}else{debug('packet received with socket readyState "%s"',this.readyState)}};Socket.prototype.onHandshake=function(data){this.emit("handshake",data);this.id=data.sid;this.transport.query.sid=data.sid;this.upgrades=data.upgrades;this.pingTimeout=data.pingTimeout;this.onOpen();this.setPingTimeout()};Socket.prototype.setPingTimeout=function(){clearTimeout(this.pingTimeoutTimer);var self=this;this.pingTimeoutTimer=setTimeout(function(){self.onClose("ping timeout")},this.pingTimeout)};Socket.prototype.flush=function(){if("closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){debug("flushing %d packets in socket",this.writeBuffer.length);this.transport.send(this.writeBuffer);this.writeBuffer=[]}};Socket.prototype.send=function(msg){this.sendPacket("message",msg);return this};Socket.prototype.sendPacket=function(type,data){var packet={type:type,data:data};this.writeBuffer.push(packet);this.flush()};Socket.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState){this.onClose("forced close");debug("socket closing - telling transport to close");this.transport.close()}return this};Socket.prototype.onError=function(err){this.emit("error",err);this.onClose("transport error",err)};Socket.prototype.onClose=function(reason,desc){if("closed"!=this.readyState){debug('socket close with reason: "%s"',reason);this.readyState="closed";this.emit("close",reason,desc);this.onclose&&this.onclose.call(this)}};function rnd(){return String(Math.random()).substr(5)+String(Math.random()).substr(5)}});require.register("transport.html",function(module,exports,require,global){var util=require("./util"),parser=require("./parser"),EventEmitter=require("./event-emitter");module.exports=Transport;function Transport(opts){this.path=opts.path;this.host=opts.host;this.port=opts.port;this.secure=opts.secure;this.query=opts.query;this.timestampParam=opts.timestampParam;this.timestampRequests=opts.timestampRequests;this.readyState=""}util.inherits(Transport,EventEmitter);Transport.prototype.onError=function(msg,desc){var err=new Error(msg);err.type="TransportError";err.description=desc;this.emit("error",err);return this};Transport.prototype.open=function(){if("closed"==this.readyState||""==this.readyState){this.readyState="opening";this.doOpen()}return this};Transport.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState){this.doClose();this.onClose()}return this};Transport.prototype.send=function(packets){if("open"==this.readyState){this.write(packets)}else{throw new Error("Transport not open")}};Transport.prototype.onOpen=function(){this.readyState="open";this.writable=true;this.emit("open")};Transport.prototype.onData=function(data){this.onPacket(parser.decodePacket(data))};Transport.prototype.onPacket=function(packet){this.emit("packet",packet)};Transport.prototype.onClose=function(){this.readyState="closed";this.emit("close")}});require.register("transports/flashsocket.html",function(module,exports,require,global){var WS=require("./websocket"),util=require("../util");module.exports=FlashWS;function FlashWS(options){WS.call(this,options);this.flashPath=options.flashPath;this.policyPort=options.policyPort}util.inherits(FlashWS,WS);FlashWS.prototype.name="flashsocket";FlashWS.prototype.doOpen=function(){if(!this.check()){return}function log(type){return function(){var str=Array.prototype.join.call(arguments," ")}}WEB_SOCKET_LOGGER={log:log("debug"),error:log("error")};WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR=true;WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=true;if("undefined"==typeof WEB_SOCKET_SWF_LOCATION){WEB_SOCKET_SWF_LOCATION=this.flashPath+"WebSocketMainInsecure.swf"}var deps=[this.flashPath+"web_socket.js"];if("undefined"==typeof swfobject){deps.unshift(this.flashPath+"swfobject.js")}var self=this;load(deps,function(){self.ready(function(){WebSocket.__addTask(function(){WS.prototype.doOpen.call(self)})})})};FlashWS.prototype.doClose=function(){if(!this.socket){return}var self=this;WebSocket.__addTask(function(){WS.prototype.doClose.call(self)})};FlashWS.prototype.write=function(){var self=this,args=arguments;WebSocket.__addTask(function(){WS.prototype.write.apply(self,args)})};FlashWS.prototype.ready=function(fn){if(typeof WebSocket=="undefined"||!("__initialize" in WebSocket)||!swfobject){return}if(swfobject.getFlashPlayerVersion().major<10){return}function init(){if(!FlashWS.loaded){if(843!=self.policyPort){WebSocket.loadFlashPolicyFile("xmlsocket://"+self.host+":"+self.policyPort)}WebSocket.__initialize();FlashWS.loaded=true}fn.call(self)}var self=this;if(document.body){return init()}util.load(init)};FlashWS.prototype.check=function(){if(typeof WebSocket!="undefined"&&!("__initialize" in WebSocket)){return false}if(window.ActiveXObject){var control=null;try{control=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){}if(control){return true}}else{for(var i=0,l=navigator.plugins.length;i<l;i++){for(var j=0,m=navigator.plugins[i].length;j<m;j++){if(navigator.plugins[i][j].description=="Shockwave Flash"){return true}}}}return false};var scripts={};function create(path,fn){if(scripts[path]){return fn()}var el=document.createElement("script"),loaded=false;el.onload=el.onreadystatechange=function(){if(loaded||scripts[path]){return}var rs=el.readyState;if(!rs||"loaded"==rs||"complete"==rs){el.onload=el.onreadystatechange=null;loaded=true;scripts[path]=true;fn()}};el.async=1;el.src=path;var head=document.getElementsByTagName("head")[0];head.insertBefore(el,head.firstChild)}function load(arr,fn){function process(i){if(!arr[i]){return fn()}create(arr[i],function(){process(++i)})}process(0)}});require.register("transports/index.html",function(module,exports,require,global){var XHR=require("./polling-xhr"),JSONP=require("./polling-jsonp"),websocket=require("./websocket"),flashsocket=require("./flashsocket"),util=require("../util");exports.polling=polling;exports.websocket=websocket;exports.flashsocket=flashsocket;function polling(opts){var xd=false;if(global.location){xd=opts.host!=global.location.hostname||global.location.port!=opts.port}if(util.request(xd)&&!opts.forceJSONP){return new XHR(opts)}else{return new JSONP(opts)}}});require.register("transports/polling-jsonp.html",function(module,exports,require,global){var Polling=require("./polling"),util=require("../util");module.exports=JSONPPolling;var rNewline=/\n/g;var callbacks;var index=0;function empty(){}function JSONPPolling(opts){Polling.call(this,opts);if(!callbacks){if(!global.___eio){global.___eio=[]}callbacks=global.___eio}this.index=callbacks.length;var self=this;callbacks.push(function(msg){self.onData(msg)});this.query.j=this.index}util.inherits(JSONPPolling,Polling);JSONPPolling.prototype.doOpen=function(){var self=this;util.defer(function(){Polling.prototype.doOpen.call(self)})};JSONPPolling.prototype.doClose=function(){if(this.script){this.script.parentNode.removeChild(this.script);this.script=null}if(this.form){this.form.parentNode.removeChild(this.form);this.form=null}Polling.prototype.doClose.call(this)};JSONPPolling.prototype.doPoll=function(){var script=document.createElement("script");if(this.script){this.script.parentNode.removeChild(this.script);this.script=null}script.async=true;script.src=this.uri();var insertAt=document.getElementsByTagName("script")[0];insertAt.parentNode.insertBefore(script,insertAt);this.script=script;if(util.ua.gecko){setTimeout(function(){var iframe=document.createElement("iframe");document.body.appendChild(iframe);document.body.removeChild(iframe)},100)}};JSONPPolling.prototype.doWrite=function(data,fn){var self=this;if(!this.form){var form=document.createElement("form"),area=document.createElement("textarea"),id=this.iframeId="eio_iframe_"+this.index,iframe;form.className="socketio";form.style.position="absolute";form.style.top="-1000px";form.style.left="-1000px";form.target=id;form.method="POST";form.setAttribute("accept-charset","utf-8");area.name="d";form.appendChild(area);document.body.appendChild(form);this.form=form;this.area=area}this.form.action=this.uri();function complete(){initIframe();fn()}function initIframe(){if(self.iframe){self.form.removeChild(self.iframe)}try{iframe=document.createElement('<iframe name="'+self.iframeId+'">')}catch(e){iframe=document.createElement("iframe");iframe.name=self.iframeId}iframe.id=self.iframeId;self.form.appendChild(iframe);self.iframe=iframe}initIframe();this.area.value=data.replace(rNewline,"\\n");try{this.form.submit()}catch(e){}if(this.iframe.attachEvent){this.iframe.onreadystatechange=function(){if(self.iframe.readyState=="complete"){complete()}}}else{this.iframe.onload=complete}}});require.register("transports/polling-xhr.html",function(module,exports,require,global){var Polling=require("./polling"),EventEmitter=require("../event-emitter"),util=require("../util");module.exports=XHR;module.exports.Request=Request;function empty(){}function XHR(opts){Polling.call(this,opts);if(global.location){this.xd=opts.host!=global.location.hostname||global.location.port!=opts.port}}util.inherits(XHR,Polling);XHR.prototype.doOpen=function(){var self=this;util.defer(function(){Polling.prototype.doOpen.call(self)})};XHR.prototype.request=function(opts){opts=opts||{};opts.uri=this.uri();opts.xd=this.xd;return new Request(opts)};XHR.prototype.doWrite=function(data,fn){var req=this.request({method:"POST",data:data}),self=this;req.on("success",fn);req.on("error",function(err){self.onError("xhr post error",err)});this.sendXhr=req};XHR.prototype.doPoll=function(){var req=this.request(),self=this;req.on("data",function(data){self.onData(data)});req.on("error",function(err){self.onError("xhr poll error",err)});this.pollXhr=req};function Request(opts){this.method=opts.method||"GET";this.uri=opts.uri;this.xd=!!opts.xd;this.async=false!==opts.async;this.data=undefined!=opts.data?opts.data:null;this.create()}util.inherits(Request,EventEmitter);Request.prototype.create=function(){var xhr=this.xhr=util.request(this.xd),self=this;xhr.open(this.method,this.uri,this.async);if("POST"==this.method){try{if(xhr.setRequestHeader){xhr.setRequestHeader("Content-type","text/plain;charset=UTF-8")}else{xhr.contentType="text/plain"}}catch(e){}}if(this.xd&&global.XDomainRequest&&xhr instanceof XDomainRequest){xhr.onerror=function(e){self.onError(e)};xhr.onload=function(){self.onData(xhr.responseText)};xhr.onprogress=empty}else{if("withCredentials" in xhr){xhr.withCredentials=true}xhr.onreadystatechange=function(){var data;try{if(4!=xhr.readyState){return}if(200==xhr.status||1223==xhr.status){data=xhr.responseText}else{self.onError(xhr.status)}}catch(e){self.onError(e)}if(undefined!==data){self.onData(data)}}}xhr.send(this.data);if(global.ActiveXObject){this.index=Request.requestsCount++;Request.requests[this.index]=this}};Request.prototype.onSuccess=function(){this.emit("success");this.cleanup()};Request.prototype.onData=function(data){this.emit("data",data);this.onSuccess()};Request.prototype.onError=function(err){this.emit("error",err);this.cleanup()};Request.prototype.cleanup=function(){this.xhr.onreadystatechange=empty;this.xhr.onload=this.xhr.onerror=empty;try{this.xhr.abort()}catch(e){}if(global.ActiveXObject){delete Request.requests[this.index]}this.xhr=null};Request.prototype.abort=function(){this.cleanup()};if(global.ActiveXObject){Request.requestsCount=0;Request.requests={};global.attachEvent("onunload",function(){for(var i in Request.requests){if(Request.requests.hasOwnProperty(i)){Request.requests[i].abort()}}})}});require.register("transports/polling.html",function(module,exports,require,global){var Transport=require("../transport"),util=require("../util"),parser=require("../parser");module.exports=Polling;function Polling(opts){Transport.call(this,opts)}util.inherits(Polling,Transport);Polling.prototype.name="polling";Polling.prototype.doOpen=function(){this.poll()};Polling.prototype.pause=function(onPause){var pending=0,self=this;this.readyState="pausing";function pause(){self.readyState="paused";onPause()}if(this.polling||!this.writable){var total=0;if(this.polling){total++;this.once("pollComplete",function(){--total||pause()})}if(!this.writable){total++;this.once("drain",function(){--total||pause()})}}else{pause()}};Polling.prototype.poll=function(){this.polling=true;this.doPoll();this.emit("poll")};Polling.prototype.onData=function(data){var packets=parser.decodePayload(data);for(var i=0,l=packets.length;i<l;i++){if("opening"==this.readyState){this.onOpen()}if("close"==packets[i].type){this.onClose();return}this.onPacket(packets[i])}this.polling=false;this.emit("pollComplete");if("open"==this.readyState){this.poll()}else{}};Polling.prototype.doClose=function(){this.send([{type:"close"}])};Polling.prototype.write=function(packets){var self=this;this.writable=false;this.doWrite(parser.encodePayload(packets),function(){self.writable=true;self.emit("drain")})};Polling.prototype.uri=function(){var query=this.query||{},schema=this.secure?"https":"http",port="";if(global.ActiveXObject||util.ua.android||this.timestampRequests){query[this.timestampParam]=+new Date}query=util.qs(query);if(this.port&&(("https"==schema&&this.port!=443)||("http"==schema&&this.port!=80))){port=":"+this.port}if(query.length){query="?"+query}return schema+"://"+this.host+port+this.path+query}});require.register("transports/websocket.html",function(module,exports,require,global){var Transport=require("../transport"),parser=require("../parser"),util=require("../util");module.exports=WS;function WS(opts){Transport.call(this,opts)}util.inherits(WS,Transport);WS.prototype.name="websocket";WS.prototype.doOpen=function(){if(!this.check()){return}var self=this;this.socket=new (ws())(this.uri());this.socket.onopen=function(){self.onOpen()};this.socket.onclose=function(){self.onClose()};this.socket.onmessage=function(ev){self.onData(ev.data)};this.socket.onerror=function(e){self.onError("websocket error",e)}};WS.prototype.write=function(packets){for(var i=0,l=packets.length;i<l;i++){this.socket.send(parser.encodePacket(packets[i]))}};WS.prototype.doClose=function(){if(typeof this.socket!=="undefined"){this.socket.close()}};WS.prototype.uri=function(){var query=this.query||{},schema=this.secure?"wss":"ws",port="";if(this.port&&(("wss"==schema&&this.port!=443)||("ws"==schema&&this.port!=80))){port=":"+this.port}if(this.timestampRequests){query[this.timestampParam]=+new Date}query=util.qs(query);if(query.length){query="?"+query}return schema+"://"+this.host+port+this.path+query};WS.prototype.check=function(){var websocket=ws();return !!websocket&&!("__initialize" in websocket&&this.name===WS.prototype.name)};function ws(){return global.WebSocket||global.MozWebSocket}});require.register("util.html",function(module,exports,require,global){var pageLoaded=false;exports.inherits=function inherits(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c};exports.keys=Object.keys||function(obj){var ret=[],has=Object.prototype.hasOwnProperty;for(var i in obj){if(has.call(obj,i)){ret.push(i)}}return ret};exports.on=function(element,event,fn,capture){if(element.attachEvent){element.attachEvent("on"+event,fn)}else{if(element.addEventListener){element.addEventListener(event,fn,capture)}}};exports.load=function(fn){if(global.document&&document.readyState==="complete"||pageLoaded){return fn()}exports.on(global,"load",fn,false)};if("undefined"!=typeof window){exports.load(function(){pageLoaded=true})}exports.defer=function(fn){if(!exports.ua.webkit||"undefined"!=typeof importScripts){return fn()}exports.load(function(){setTimeout(fn,100)})};var rvalidchars=/^[\],:{}\s]*$/,rvalidescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rvalidtokens=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rtrimLeft=/^\s+/,rtrimRight=/\s+$/;exports.parseJSON=function(data){if("string"!=typeof data||!data){return null}data=data.replace(rtrimLeft,"").replace(rtrimRight,"");if(global.JSON&&JSON.parse){return JSON.parse(data)}if(rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))){return(new Function("return "+data))()}};exports.ua={};exports.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&(function(){try{var a=new XMLHttpRequest()}catch(e){return false}return a.withCredentials!=undefined})();exports.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent);exports.ua.gecko="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);exports.ua.android="undefined"!=typeof navigator&&/android/i.test(navigator.userAgent);exports.request=function request(xdomain){if(xdomain&&"undefined"!=typeof XDomainRequest){return new XDomainRequest()}try{if("undefined"!=typeof XMLHttpRequest&&(!xdomain||exports.ua.hasCORS)){return new XMLHttpRequest()}}catch(e){}if(!xdomain){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}};var re=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;var parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];exports.parseUri=function(str){var m=re.exec(str||""),uri={},i=14;while(i--){uri[parts[i]]=m[i]||""}return uri};exports.qs=function(obj){var str="";for(var i in obj){if(obj.hasOwnProperty(i)){if(str.length){str+="&"}str+=i+"="+encodeURIComponent(obj[i])}}return str}});eio=require("engine.io-client")})();(function(){function require(path,parent,orig){var resolved=require.resolve(path);if(null==resolved){orig=orig||path;parent=parent||"root";var err=new Error('Failed to require "'+orig+'" from "'+parent+'"');err.path=orig;err.parent=parent;err.require=true;throw err}var module=require.modules[resolved];if(!module.exports){module.exports={};module.client=module.component=true;module.call(this,module.exports,require.relative(resolved),module)}return module.exports}require.modules={};require.aliases={};require.resolve=function(path){if(path.charAt(0)==="https://web.archive.org/"){path=path.slice(1)}var index=path+"/index.js";var paths=[path,path+".js",path+".json",path+"/index.js",path+"/index.json"];for(var i=0;i<paths.length;i++){var path=paths[i];if(require.modules.hasOwnProperty(path)){return path}}if(require.aliases.hasOwnProperty(index)){return require.aliases[index]}};require.normalize=function(curr,path){var segs=[];if("."!=path.charAt(0)){return path}curr=curr.split("https://web.archive.org/");path=path.split("https://web.archive.org/");for(var i=0;i<path.length;++i){if(".."==path[i]){curr.pop()}else{if("."!=path[i]&&""!=path[i]){segs.push(path[i])}}}return curr.concat(segs).join("https://web.archive.org/")};require.register=function(path,definition){require.modules[path]=definition};require.alias=function(from,to){if(!require.modules.hasOwnProperty(from)){throw new Error('Failed to alias "'+from+'", it does not exist')}require.aliases[to]=from};require.relative=function(parent){var p=require.normalize(parent,"..");function lastIndexOf(arr,obj){var i=arr.length;while(i--){if(arr[i]===obj){return i}}return -1}function localRequire(path){var resolved=localRequire.resolve(path);return require(resolved,parent,path)}localRequire.resolve=function(path){var c=path.charAt(0);if("/"==c){return path.slice(1)}if("."==c){return require.normalize(p,path)}var segs=parent.split("https://web.archive.org/");var i=lastIndexOf(segs,"deps")+1;if(!i){i=0}path=segs.slice(0,i+1).join("https://web.archive.org/")+"/deps/"+path;return path};localRequire.exists=function(path){return require.modules.hasOwnProperty(localRequire.resolve(path))};return localRequire};require.register("component-emitter/index.html",function(exports,require,module){module.exports=Emitter;function Emitter(obj){if(obj){return mixin(obj)}}function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key]}return obj}Emitter.prototype.on=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks[event]=this._callbacks[event]||[]).push(fn);return this};Emitter.prototype.once=function(event,fn){var self=this;this._callbacks=this._callbacks||{};function on(){self.off(event,on);fn.apply(this,arguments)}fn._off=on;this.on(event,on);return this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=function(event,fn){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var callbacks=this._callbacks[event];if(!callbacks){return this}if(1==arguments.length){delete this._callbacks[event];return this}var i=callbacks.indexOf(fn._off||fn);if(~i){callbacks.splice(i,1)}return this};Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks[event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,args)}}return this};Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks[event]||[]};Emitter.prototype.hasListeners=function(event){return !!this.listeners(event).length}});require.register("component-indexof/index.html",function(exports,require,module){var indexOf=[].indexOf;module.exports=function(arr,obj){if(indexOf){return arr.indexOf(obj)}for(var i=0;i<arr.length;++i){if(arr[i]===obj){return i}}return -1}});require.register("LearnBoost-engine.io-protocol/lib/index.html",function(exports,require,module){var keys=require("./keys");exports.protocol=2;var packets=exports.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6};var packetslist=keys(packets);var err={type:"error",data:"parser error"};exports.encodePacket=function(packet){var encoded=packets[packet.type];if(undefined!==packet.data){encoded+=String(packet.data)}return""+encoded};exports.decodePacket=function(data){var type=data.charAt(0);if(Number(type)!=type||!packetslist[type]){return err}if(data.length>1){return{type:packetslist[type],data:data.substring(1)}}else{return{type:packetslist[type]}}};exports.encodePayload=function(packets){if(!packets.length){return"0:"}var encoded="";var message;for(var i=0,l=packets.length;i<l;i++){message=exports.encodePacket(packets[i]);encoded+=message.length+":"+message}return encoded};exports.decodePayload=function(data,callback){var packet;if(data==""){return callback(err,0,1)}var length="",n,msg;for(var i=0,l=data.length;i<l;i++){var chr=data.charAt(i);if(":"!=chr){length+=chr}else{if(""==length||(length!=(n=Number(length)))){return callback(err,0,1)}msg=data.substr(i+1,n);if(length!=msg.length){return callback(err,0,1)}if(msg.length){packet=exports.decodePacket(msg);if(err.type==packet.type&&err.data==packet.data){return callback(err,0,1)}var ret=callback(packet,i+n,l);if(false===ret){return}}i+=n;length=""}}if(length!=""){return callback(err,0,1)}}});require.register("LearnBoost-engine.io-protocol/lib/keys.html",function(exports,require,module){module.exports=Object.keys||function keys(obj){var arr=[];var has=Object.prototype.hasOwnProperty;for(var i in obj){if(has.call(obj,i)){arr.push(i)}}return arr}});require.register("visionmedia-debug/index.html",function(exports,require,module){if("undefined"==typeof window){module.exports=require("./lib/debug")}else{module.exports=require("./debug")}});require.register("visionmedia-debug/debug.html",function(exports,require,module){module.exports=debug;function debug(name){if(!debug.enabled(name)){return function(){}}return function(fmt){fmt=coerce(fmt);var curr=new Date;var ms=curr-(debug[name]||curr);debug[name]=curr;fmt=name+" "+fmt+" +"+debug.humanize(ms);window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}}debug.names=[];debug.skips=[];debug.enable=function(name){try{localStorage.debug=name}catch(e){}var split=(name||"").split(/[\s,]+/),len=split.length;for(var i=0;i<len;i++){name=split[i].replace("*",".*?");if(name[0]==="-"){debug.skips.push(new RegExp("^"+name.substr(1)+"$"))}else{debug.names.push(new RegExp("^"+name+"$"))}}};debug.disable=function(){debug.enable("")};debug.humanize=function(ms){var sec=1000,min=60*1000,hour=60*min;if(ms>=hour){return(ms/hour).toFixed(1)+"h"}if(ms>=min){return(ms/min).toFixed(1)+"m"}if(ms>=sec){return(ms/sec|0)+"s"}return ms+"ms"};debug.enabled=function(name){for(var i=0,len=debug.skips.length;i<len;i++){if(debug.skips[i].test(name)){return false}}for(var i=0,len=debug.names.length;i<len;i++){if(debug.names[i].test(name)){return true}}return false};function coerce(val){if(val instanceof Error){return val.stack||val.message}return val}if(window.localStorage){debug.enable(localStorage.debug)}});require.register("engine.io/lib/index.html",function(exports,require,module){module.exports=require("./socket");module.exports.parser=require("engine.io-parser")});require.register("engine.io/lib/socket.html",function(exports,require,module){var util=require("./util"),transports=require("./transports"),Emitter=require("./emitter"),debug=require("debug")("engine-client:socket"),index=require("indexof"),parser=require("engine.io-parser");module.exports=Socket;var global=util.global();function noop(){}function Socket(uri,opts){if(!(this instanceof Socket)){return new Socket(uri,opts)}opts=opts||{};if("object"==typeof uri){opts=uri;uri=null}if(uri){uri=util.parseUri(uri);opts.host=uri.host;opts.secure=uri.protocol=="https"||uri.protocol=="wss";opts.port=uri.port;if(uri.query){opts.query=uri.query}}this.secure=null!=opts.secure?opts.secure:(global.location&&"https:"==location.protocol);if(opts.host){var pieces=opts.host.split(":");opts.hostname=pieces.shift();if(pieces.length){opts.port=pieces.pop()}}this.hostname=opts.hostname||(global.location?location.hostname:"localhost");this.port=opts.port||(global.location&&location.port?location.port:(this.secure?443:80));this.query=opts.query||{};if("string"==typeof this.query){this.query=util.qsParse(this.query)}this.upgrade=false!==opts.upgrade;this.path=(opts.path||"/engine.io").replace(/\/$/,"")+"/";this.forceJSONP=!!opts.forceJSONP;this.timestampParam=opts.timestampParam||"t";this.timestampRequests=!!opts.timestampRequests;this.flashPath=opts.flashPath||"";this.transports=opts.transports||["polling","websocket","flashsocket"];this.readyState="";this.writeBuffer=[];this.callbackBuffer=[];this.policyPort=opts.policyPort||843;this.open();Socket.sockets.push(this);Socket.sockets.evs.emit("add",this)}Emitter(Socket.prototype);Socket.protocol=parser.protocol;Socket.sockets=[];Socket.sockets.evs=new Emitter;Socket.Socket=Socket;Socket.Transport=require("./transport");Socket.Emitter=require("./emitter");Socket.transports=require("./transports");Socket.util=require("./util");Socket.parser=require("engine.io-parser");Socket.prototype.createTransport=function(name){debug('creating transport "%s"',name);var query=clone(this.query);query.EIO=parser.protocol;query.transport=name;if(this.id){query.sid=this.id}var transport=new transports[name]({hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:query,forceJSONP:this.forceJSONP,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,flashPath:this.flashPath,policyPort:this.policyPort});return transport};function clone(obj){var o={};for(var i in obj){if(obj.hasOwnProperty(i)){o[i]=obj[i]}}return o}Socket.prototype.open=function(){this.readyState="opening";var transport=this.createTransport(this.transports[0]);transport.open();this.setTransport(transport)};Socket.prototype.setTransport=function(transport){var self=this;if(this.transport){debug("clearing existing transport");this.transport.removeAllListeners()}this.transport=transport;transport.on("drain",function(){self.onDrain()}).on("packet",function(packet){self.onPacket(packet)}).on("error",function(e){self.onError(e)}).on("close",function(){self.onClose("transport close")})};Socket.prototype.probe=function(name){debug('probing transport "%s"',name);var transport=this.createTransport(name,{probe:1}),failed=false,self=this;transport.once("open",function(){if(failed){return}debug('probe transport "%s" opened',name);transport.send([{type:"ping",data:"probe"}]);transport.once("packet",function(msg){if(failed){return}if("pong"==msg.type&&"probe"==msg.data){debug('probe transport "%s" pong',name);self.upgrading=true;self.emit("upgrading",transport);debug('pausing current transport "%s"',self.transport.name);self.transport.pause(function(){if(failed){return}if("closed"==self.readyState||"closing"==self.readyState){return}debug("changing transport and sending upgrade packet");transport.removeListener("error",onerror);self.emit("upgrade",transport);self.setTransport(transport);transport.send([{type:"upgrade"}]);transport=null;self.upgrading=false;self.flush()})}else{debug('probe transport "%s" failed',name);var err=new Error("probe error");err.transport=transport.name;self.emit("error",err)}})});transport.once("error",onerror);function onerror(err){if(failed){return}failed=true;var error=new Error("probe error: "+err);error.transport=transport.name;transport.close();transport=null;debug('probe transport "%s" failed because of error: %s',name,err);self.emit("error",error)}transport.open();this.once("close",function(){if(transport){debug("socket closed prematurely - aborting probe");failed=true;transport.close();transport=null}});this.once("upgrading",function(to){if(transport&&to.name!=transport.name){debug('"%s" works - aborting "%s"',to.name,transport.name);transport.close();transport=null}})};Socket.prototype.onOpen=function(){debug("socket open");this.readyState="open";this.emit("open");this.onopen&&this.onopen.call(this);this.flush();if("open"==this.readyState&&this.upgrade&&this.transport.pause){debug("starting upgrade probes");for(var i=0,l=this.upgrades.length;i<l;i++){this.probe(this.upgrades[i])}}};Socket.prototype.onPacket=function(packet){if("opening"==this.readyState||"open"==this.readyState){debug('socket receive: type "%s", data "%s"',packet.type,packet.data);this.emit("packet",packet);this.emit("heartbeat");switch(packet.type){case"open":this.onHandshake(util.parseJSON(packet.data));break;case"pong":this.setPing();break;case"error":var err=new Error("server error");err.code=packet.data;this.emit("error",err);break;case"message":this.emit("data",packet.data);this.emit("message",packet.data);var event={data:packet.data};event.toString=function(){return packet.data};this.onmessage&&this.onmessage.call(this,event);break}}else{debug('packet received with socket readyState "%s"',this.readyState)}};Socket.prototype.onHandshake=function(data){this.emit("handshake",data);this.id=data.sid;this.transport.query.sid=data.sid;this.upgrades=this.filterUpgrades(data.upgrades);this.pingInterval=data.pingInterval;this.pingTimeout=data.pingTimeout;this.onOpen();this.setPing();this.removeListener("heartbeat",this.onHeartbeat);this.on("heartbeat",this.onHeartbeat)};Socket.prototype.onHeartbeat=function(timeout){clearTimeout(this.pingTimeoutTimer);var self=this;self.pingTimeoutTimer=setTimeout(function(){if("closed"==self.readyState){return}self.onClose("ping timeout")},timeout||(self.pingInterval+self.pingTimeout))};Socket.prototype.setPing=function(){var self=this;clearTimeout(self.pingIntervalTimer);self.pingIntervalTimer=setTimeout(function(){debug("writing ping packet - expecting pong within %sms",self.pingTimeout);self.ping();self.onHeartbeat(self.pingTimeout)},self.pingInterval)};Socket.prototype.ping=function(){this.sendPacket("ping")};Socket.prototype.onDrain=function(){for(var i=0;i<this.prevBufferLen;i++){if(this.callbackBuffer[i]){this.callbackBuffer[i]()}}this.writeBuffer.splice(0,this.prevBufferLen);this.callbackBuffer.splice(0,this.prevBufferLen);this.prevBufferLen=0;if(this.writeBuffer.length==0){this.emit("drain")}else{this.flush()}};Socket.prototype.flush=function(){if("closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){debug("flushing %d packets in socket",this.writeBuffer.length);this.transport.send(this.writeBuffer);this.prevBufferLen=this.writeBuffer.length;this.emit("flush")}};Socket.prototype.write=Socket.prototype.send=function(msg,fn){this.sendPacket("message",msg,fn);return this};Socket.prototype.sendPacket=function(type,data,fn){var packet={type:type,data:data};this.emit("packetCreate",packet);this.writeBuffer.push(packet);this.callbackBuffer.push(fn);this.flush()};Socket.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState){this.onClose("forced close");debug("socket closing - telling transport to close");this.transport.close()}return this};Socket.prototype.onError=function(err){debug("socket error %j",err);this.emit("error",err);this.onerror&&this.onerror.call(this,err);this.onClose("transport error",err)};Socket.prototype.onClose=function(reason,desc){if("opening"==this.readyState||"open"==this.readyState){debug('socket close with reason: "%s"',reason);var self=this;clearTimeout(this.pingIntervalTimer);clearTimeout(this.pingTimeoutTimer);setTimeout(function(){self.writeBuffer=[];self.callbackBuffer=[]},0);this.transport.removeAllListeners();var prev=this.readyState;this.readyState="closed";this.id=null;if(prev=="open"){this.emit("close",reason,desc);this.onclose&&this.onclose.call(this)}}};Socket.prototype.filterUpgrades=function(upgrades){var filteredUpgrades=[];for(var i=0,j=upgrades.length;i<j;i++){if(~index(this.transports,upgrades[i])){filteredUpgrades.push(upgrades[i])}}return filteredUpgrades}});require.register("engine.io/lib/transport.html",function(exports,require,module){var util=require("./util"),parser=require("engine.io-parser"),Emitter=require("./emitter");module.exports=Transport;function Transport(opts){this.path=opts.path;this.hostname=opts.hostname;this.port=opts.port;this.secure=opts.secure;this.query=opts.query;this.timestampParam=opts.timestampParam;this.timestampRequests=opts.timestampRequests;this.readyState=""}Emitter(Transport.prototype);Transport.prototype.onError=function(msg,desc){var err=new Error(msg);err.type="TransportError";err.description=desc;this.emit("error",err);return this};Transport.prototype.open=function(){if("closed"==this.readyState||""==this.readyState){this.readyState="opening";this.doOpen()}return this};Transport.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState){this.doClose();this.onClose()}return this};Transport.prototype.send=function(packets){if("open"==this.readyState){this.write(packets)}else{throw new Error("Transport not open")}};Transport.prototype.onOpen=function(){this.readyState="open";this.writable=true;this.emit("open")};Transport.prototype.onData=function(data){this.onPacket(parser.decodePacket(data))};Transport.prototype.onPacket=function(packet){this.emit("packet",packet)};Transport.prototype.onClose=function(){this.readyState="closed";this.emit("close")}});require.register("engine.io/lib/emitter.html",function(exports,require,module){var Emitter=require("emitter");module.exports=Emitter;Emitter.prototype.addEventListener=Emitter.prototype.on;Emitter.prototype.removeEventListener=Emitter.prototype.off;Emitter.prototype.removeListener=Emitter.prototype.off});require.register("engine.io/lib/util.html",function(exports,require,module){var pageLoaded=false;exports.global=function(){return"undefined"!=typeof window?window:global};exports.inherits=function inherits(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c};exports.keys=Object.keys||function(obj){var ret=[];var has=Object.prototype.hasOwnProperty;for(var i in obj){if(has.call(obj,i)){ret.push(i)}}return ret};exports.on=function(element,event,fn,capture){if(element.attachEvent){element.attachEvent("on"+event,fn)}else{if(element.addEventListener){element.addEventListener(event,fn,capture)}}};exports.load=function(fn){var global=exports.global();if(global.document&&document.readyState==="complete"||pageLoaded){return fn()}exports.on(global,"load",fn,false)};if("undefined"!=typeof window){exports.load(function(){pageLoaded=true})}exports.defer=function(fn){if(!exports.ua.webkit||"undefined"!=typeof importScripts){return fn()}exports.load(function(){setTimeout(fn,100)})};var rvalidchars=/^[\],:{}\s]*$/;var rvalidescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g;var rvalidtokens=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g;var rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g;var rtrimLeft=/^\s+/;var rtrimRight=/\s+$/;exports.parseJSON=function(data){var global=exports.global();if("string"!=typeof data||!data){return null}data=data.replace(rtrimLeft,"").replace(rtrimRight,"");if(global.JSON&&JSON.parse){return JSON.parse(data)}if(rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))){return(new Function("return "+data))()}};exports.ua={};exports.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&(function(){var a;try{a=new XMLHttpRequest()}catch(e){return false}return a.withCredentials!=undefined})();exports.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent);exports.ua.gecko="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);exports.ua.android="undefined"!=typeof navigator&&/android/i.test(navigator.userAgent);exports.ua.ios="undefined"!=typeof navigator&&/^(iPad|iPhone|iPod)$/.test(navigator.platform);exports.ua.ios6=exports.ua.ios&&/OS 6_/.test(navigator.userAgent);exports.request=function request(xdomain){try{var _XMLHttpRequest=require("xmlhttprequest").XMLHttpRequest;return new _XMLHttpRequest()}catch(e){}if(xdomain&&"undefined"!=typeof XDomainRequest&&!exports.ua.hasCORS){return new XDomainRequest()}try{if("undefined"!=typeof XMLHttpRequest&&(!xdomain||exports.ua.hasCORS)){return new XMLHttpRequest()}}catch(e){}if(!xdomain){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}};var re=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;var parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];exports.parseUri=function(str){var m=re.exec(str||""),uri={},i=14;while(i--){uri[parts[i]]=m[i]||""}return uri};exports.qs=function(obj){var str="";for(var i in obj){if(obj.hasOwnProperty(i)){if(str.length){str+="&"}str+=encodeURIComponent(i)+"="+encodeURIComponent(obj[i])}}return str};exports.qsParse=function(qs){var qry={};var pairs=qs.split("&");for(var i=0,l=pairs.length;i<l;i++){var pair=pairs[i].split("=");qry[decodeURIComponent(pair[0])]=decodeURIComponent(pair[1])}return qry}});require.register("engine.io/lib/transports/index.html",function(exports,require,module){var XHR=require("./polling-xhr"),JSONP=require("./polling-jsonp"),websocket=require("./websocket"),flashsocket=require("./flashsocket"),util=require("../util");exports.polling=polling;exports.websocket=websocket;exports.flashsocket=flashsocket;var global=util.global();function polling(opts){var xhr,xd=false,isXProtocol=false;if(global.location){var isSSL="https:"==location.protocol;var port=location.port;if(Number(port)!==port){port=isSSL?443:80}xd=opts.hostname!=location.hostname||port!=opts.port;isXProtocol=opts.secure!=isSSL}xhr=util.request(xd);if(isXProtocol&&global.XDomainRequest&&xhr instanceof global.XDomainRequest){return new JSONP(opts)}if(xhr&&!opts.forceJSONP){return new XHR(opts)}else{return new JSONP(opts)}}});require.register("engine.io/lib/transports/polling.html",function(exports,require,module){var Transport=require("../transport"),util=require("../util"),parser=require("engine.io-parser"),debug=require("debug")("engine.io-client:polling");module.exports=Polling;var global=util.global();function Polling(opts){Transport.call(this,opts)}util.inherits(Polling,Transport);Polling.prototype.name="polling";Polling.prototype.doOpen=function(){this.poll()};Polling.prototype.pause=function(onPause){var pending=0;var self=this;this.readyState="pausing";function pause(){debug("paused");self.readyState="paused";onPause()}if(this.polling||!this.writable){var total=0;if(this.polling){debug("we are currently polling - waiting to pause");total++;this.once("pollComplete",function(){debug("pre-pause polling complete");--total||pause()})}if(!this.writable){debug("we are currently writing - waiting to pause");total++;this.once("drain",function(){debug("pre-pause writing complete");--total||pause()})}}else{pause()}};Polling.prototype.poll=function(){debug("polling");this.polling=true;this.doPoll();this.emit("poll")};Polling.prototype.onData=function(data){var self=this;debug("polling got data %s",data);parser.decodePayload(data,function(packet,index,total){if("opening"==self.readyState){self.onOpen()}if("close"==packet.type){self.onClose();return false}self.onPacket(packet)});if("closed"!=this.readyState){this.polling=false;this.emit("pollComplete");if("open"==this.readyState){this.poll()}else{debug('ignoring poll - transport state "%s"',this.readyState)}}};Polling.prototype.doClose=function(){var self=this;function close(){debug("writing close packet");self.write([{type:"close"}])}if(this.open){debug("transport open - closing");close()}else{debug("transport not open - defering close");this.once("open",close)}};Polling.prototype.write=function(packets){var self=this;this.writable=false;this.doWrite(parser.encodePayload(packets),function(){self.writable=true;self.emit("drain")})};Polling.prototype.uri=function(){var query=this.query||{};var schema=this.secure?"https":"http";var port="";if(global.ActiveXObject||util.ua.android||util.ua.ios6||this.timestampRequests){query[this.timestampParam]=+new Date}query=util.qs(query);if(this.port&&(("https"==schema&&this.port!=443)||("http"==schema&&this.port!=80))){port=":"+this.port}if(query.length){query="?"+query}return schema+"://"+this.hostname+port+this.path+query}});require.register("engine.io/lib/transports/polling-xhr.html",function(exports,require,module){var Polling=require("./polling"),util=require("../util"),Emitter=require("../emitter"),debug=require("debug")("engine.io-client:polling-xhr");module.exports=XHR;module.exports.Request=Request;var global=util.global();var xobject=global[["Active"].concat("Object").join("X")];function empty(){}function XHR(opts){Polling.call(this,opts);if(global.location){var isSSL="https:"==location.protocol;var port=location.port;if(Number(port)!==port){port=isSSL?443:80}this.xd=opts.hostname!=global.location.hostname||port!=opts.port}}util.inherits(XHR,Polling);XHR.prototype.doOpen=function(){var self=this;util.defer(function(){Polling.prototype.doOpen.call(self)})};XHR.prototype.request=function(opts){opts=opts||{};opts.uri=this.uri();opts.xd=this.xd;return new Request(opts)};XHR.prototype.doWrite=function(data,fn){var req=this.request({method:"POST",data:data});var self=this;req.on("success",fn);req.on("error",function(err){self.onError("xhr post error",err)});this.sendXhr=req};XHR.prototype.doPoll=function(){debug("xhr poll");var req=this.request();var self=this;req.on("data",function(data){self.onData(data)});req.on("error",function(err){self.onError("xhr poll error",err)});this.pollXhr=req};function Request(opts){this.method=opts.method||"GET";this.uri=opts.uri;this.xd=!!opts.xd;this.async=false!==opts.async;this.data=undefined!=opts.data?opts.data:null;this.create()}Emitter(Request.prototype);Request.prototype.create=function(){var xhr=this.xhr=util.request(this.xd);var self=this;xhr.open(this.method,this.uri,this.async);if("POST"==this.method){try{if(xhr.setRequestHeader){xhr.setRequestHeader("Content-type","text/plain;charset=UTF-8")}else{xhr.contentType="text/plain"}}catch(e){}}if(this.xd&&global.XDomainRequest&&xhr instanceof XDomainRequest){xhr.onerror=function(e){self.onError(e)};xhr.onload=function(){self.onData(xhr.responseText)};xhr.onprogress=empty}else{if("withCredentials" in xhr){xhr.withCredentials=true}xhr.onreadystatechange=function(){var data;try{if(4!=xhr.readyState){return}if(200==xhr.status||1223==xhr.status){data=xhr.responseText}else{self.onError(xhr.status)}}catch(e){self.onError(e)}if(undefined!==data){self.onData(data)}}}debug("sending xhr with url %s | data %s",this.uri,this.data);xhr.send(this.data);if(xobject){this.index=Request.requestsCount++;Request.requests[this.index]=this}};Request.prototype.onSuccess=function(){this.emit("success");this.cleanup()};Request.prototype.onData=function(data){this.emit("data",data);this.onSuccess()};Request.prototype.onError=function(err){this.emit("error",err);this.cleanup()};Request.prototype.cleanup=function(){if("undefined"==typeof this.xhr){return}this.xhr.onreadystatechange=empty;this.xhr.onload=this.xhr.onerror=empty;try{this.xhr.abort()}catch(e){}if(xobject){delete Request.requests[this.index]}this.xhr=null};Request.prototype.abort=function(){this.cleanup()};if(xobject){Request.requestsCount=0;Request.requests={};global.attachEvent("onunload",function(){for(var i in Request.requests){if(Request.requests.hasOwnProperty(i)){Request.requests[i].abort()}}})}});require.register("engine.io/lib/transports/polling-jsonp.html",function(exports,require,module){var Polling=require("./polling"),util=require("../util");module.exports=JSONPPolling;var global=util.global();var rNewline=/\n/g;var callbacks;var index=0;function empty(){}function JSONPPolling(opts){Polling.call(this,opts);if(!callbacks){if(!global.___eio){global.___eio=[]}callbacks=global.___eio}this.index=callbacks.length;var self=this;callbacks.push(function(msg){self.onData(msg)});this.query.j=this.index}util.inherits(JSONPPolling,Polling);JSONPPolling.prototype.doOpen=function(){var self=this;util.defer(function(){Polling.prototype.doOpen.call(self)})};JSONPPolling.prototype.doClose=function(){if(this.script){this.script.parentNode.removeChild(this.script);this.script=null}if(this.form){this.form.parentNode.removeChild(this.form);this.form=null}Polling.prototype.doClose.call(this)};JSONPPolling.prototype.doPoll=function(){var self=this;var script=document.createElement("script");if(this.script){this.script.parentNode.removeChild(this.script);this.script=null}script.async=true;script.src=this.uri();script.onerror=function(e){self.onError("jsonp poll error",e)};var insertAt=document.getElementsByTagName("script")[0];insertAt.parentNode.insertBefore(script,insertAt);this.script=script;if(util.ua.gecko){setTimeout(function(){var iframe=document.createElement("iframe");document.body.appendChild(iframe);document.body.removeChild(iframe)},100)}};JSONPPolling.prototype.doWrite=function(data,fn){var self=this;if(!this.form){var form=document.createElement("form");var area=document.createElement("textarea");var id=this.iframeId="eio_iframe_"+this.index;var iframe;form.className="socketio";form.style.position="absolute";form.style.top="-1000px";form.style.left="-1000px";form.target=id;form.method="POST";form.setAttribute("accept-charset","utf-8");area.name="d";form.appendChild(area);document.body.appendChild(form);this.form=form;this.area=area}this.form.action=this.uri();function complete(){initIframe();fn()}function initIframe(){if(self.iframe){try{self.form.removeChild(self.iframe)}catch(e){self.onError("jsonp polling iframe removal error",e)}}try{var html='<iframe src="javascript:0" name="'+self.iframeId+'">';iframe=document.createElement(html)}catch(e){iframe=document.createElement("iframe");iframe.name=self.iframeId;iframe.src="javascript:0"}iframe.id=self.iframeId;self.form.appendChild(iframe);self.iframe=iframe}initIframe();this.area.value=data.replace(rNewline,"\\n");try{this.form.submit()}catch(e){}if(this.iframe.attachEvent){this.iframe.onreadystatechange=function(){if(self.iframe.readyState=="complete"){complete()}}}else{this.iframe.onload=complete}}});require.register("engine.io/lib/transports/websocket.html",function(exports,require,module){var Transport=require("../transport"),parser=require("engine.io-parser"),util=require("../util"),debug=require("debug")("engine.io-client:websocket");module.exports=WS;var global=util.global();function WS(opts){Transport.call(this,opts)}util.inherits(WS,Transport);WS.prototype.name="websocket";WS.prototype.doOpen=function(){if(!this.check()){return}var self=this;this.socket=new (ws())(this.uri());this.socket.onopen=function(){self.onOpen()};this.socket.onclose=function(){self.onClose()};this.socket.onmessage=function(ev){self.onData(ev.data)};this.socket.onerror=function(e){self.onError("websocket error",e)}};if("undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)){WS.prototype.onData=function(data){var self=this;setTimeout(function(){Transport.prototype.onData.call(self,data)},0)}}WS.prototype.write=function(packets){var self=this;this.writable=false;for(var i=0,l=packets.length;i<l;i++){this.socket.send(parser.encodePacket(packets[i]))}function ondrain(){self.writable=true;self.emit("drain")}if("bufferedAmount" in this.socket){this.bufferedAmountId=setInterval(function(){if(self.socket.bufferedAmount==0){clearInterval(self.bufferedAmountId);ondrain()}},50)}else{setTimeout(ondrain,0)}};WS.prototype.onClose=function(){clearInterval(this.bufferedAmountId);Transport.prototype.onClose.call(this)};WS.prototype.doClose=function(){if(typeof this.socket!=="undefined"){this.socket.close()}};WS.prototype.uri=function(){var query=this.query||{};var schema=this.secure?"wss":"ws";var port="";if(this.port&&(("wss"==schema&&this.port!=443)||("ws"==schema&&this.port!=80))){port=":"+this.port}if(this.timestampRequests){query[this.timestampParam]=+new Date}query=util.qs(query);if(query.length){query="?"+query}return schema+"://"+this.hostname+port+this.path+query};WS.prototype.check=function(){var websocket=ws();return !!websocket&&!("__initialize" in websocket&&this.name===WS.prototype.name)};function ws(){if("undefined"==typeof window){return require("ws")}return global.WebSocket||global.MozWebSocket}});require.register("engine.io/lib/transports/flashsocket.html",function(exports,require,module){var WS=require("./websocket"),util=require("../util"),debug=require("debug")("engine.io-client:flashsocket");module.exports=FlashWS;var global=util.global();var xobject=global[["Active"].concat("Object").join("X")];function FlashWS(options){WS.call(this,options);this.flashPath=options.flashPath;this.policyPort=options.policyPort}util.inherits(FlashWS,WS);FlashWS.prototype.name="flashsocket";FlashWS.prototype.doOpen=function(){if(!this.check()){return}function log(type){return function(){var str=Array.prototype.join.call(arguments," ");debug("[websocketjs %s] %s",type,str)}}WEB_SOCKET_LOGGER={log:log("debug"),error:log("error")};WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR=true;WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=true;if("undefined"==typeof WEB_SOCKET_SWF_LOCATION){WEB_SOCKET_SWF_LOCATION=this.flashPath+"WebSocketMainInsecure.swf"}var deps=[this.flashPath+"web_socket.js"];if("undefined"==typeof swfobject){deps.unshift(this.flashPath+"swfobject.js")}var self=this;load(deps,function(){self.ready(function(){WebSocket.__addTask(function(){WS.prototype.doOpen.call(self)})})})};FlashWS.prototype.doClose=function(){if(!this.socket){return}var self=this;WebSocket.__addTask(function(){WS.prototype.doClose.call(self)})};FlashWS.prototype.write=function(){var self=this,args=arguments;WebSocket.__addTask(function(){WS.prototype.write.apply(self,args)})};FlashWS.prototype.ready=function(fn){if(typeof WebSocket=="undefined"||!("__initialize" in WebSocket)||!swfobject){return}if(swfobject.getFlashPlayerVersion().major<10){return}function init(){if(!FlashWS.loaded){if(843!=self.policyPort){WebSocket.loadFlashPolicyFile("xmlsocket://"+self.host+":"+self.policyPort)}WebSocket.__initialize();FlashWS.loaded=true}fn.call(self)}var self=this;if(document.body){return init()}util.load(init)};FlashWS.prototype.check=function(){if("undefined"==typeof window){return false}if(typeof WebSocket!="undefined"&&!("__initialize" in WebSocket)){return false}if(xobject){var control=null;try{control=new xobject("ShockwaveFlash.ShockwaveFlash")}catch(e){}if(control){return true}}else{for(var i=0,l=navigator.plugins.length;i<l;i++){for(var j=0,m=navigator.plugins[i].length;j<m;j++){if(navigator.plugins[i][j].description=="Shockwave Flash"){return true}}}}return false};var scripts={};function create(path,fn){if(scripts[path]){return fn()}var el=document.createElement("script");var loaded=false;debug('loading "%s"',path);el.onload=el.onreadystatechange=function(){if(loaded||scripts[path]){return}var rs=el.readyState;if(!rs||"loaded"==rs||"complete"==rs){debug('loaded "%s"',path);el.onload=el.onreadystatechange=null;loaded=true;scripts[path]=true;fn()}};el.async=1;el.src=path;var head=document.getElementsByTagName("head")[0];head.insertBefore(el,head.firstChild)}function load(arr,fn){function process(i){if(!arr[i]){return fn()}create(arr[i],function(){process(++i)})}process(0)}});require.alias("component-emitter/index.html","engine.io/deps/emitter/index.html");require.alias("component-emitter/index.html","emitter/index.html");require.alias("component-indexof/index.html","engine.io/deps/indexof/index.html");require.alias("component-indexof/index.html","indexof/index.html");require.alias("LearnBoost-engine.io-protocol/lib/index.html","engine.io/deps/engine.io-parser/lib/index.html");require.alias("LearnBoost-engine.io-protocol/lib/keys.html","engine.io/deps/engine.io-parser/lib/keys.html");require.alias("LearnBoost-engine.io-protocol/lib/index.html","engine.io/deps/engine.io-parser/index.html");require.alias("LearnBoost-engine.io-protocol/lib/index.html","engine.io-parser/index.html");require.alias("LearnBoost-engine.io-protocol/lib/index.html","LearnBoost-engine.io-protocol/index.html");require.alias("visionmedia-debug/index.html","engine.io/deps/debug/index.html");require.alias("visionmedia-debug/debug.html","engine.io/deps/debug/debug.html");require.alias("visionmedia-debug/index.html","debug/index.html");require.alias("engine.io/lib/index.html","engine.io/index.html");if(typeof exports=="object"){this["eio_079"]=require("engine.io")}else{if(typeof define=="function"&&define.amd){define(function(){return require("engine.io")})}else{this["eio_079"]=require("engine.io")}}})();!function(){var ZRC,RadarClient,StateMachine,m={exports:{}};(function(){function require(e,t,n){t||(t=0);var r=require.resolve(e,t),i=require.m[t][r];if(!i){throw new Error('failed to require "'+e+'" from '+n)}if(i.c){t=i.c,r=i.m,i=require.m[t][i.m];if(!i){throw new Error('failed to require "'+r+'" from '+t)}}return i.exports||(i.exports={},i.call(i.exports,i,i.exports,require.relative(r,t))),i.exports}require.resolve=function(e,t){var n=e,r=e+".js",i=e+"/index.js";return require.m[t][r]&&r||require.m[t][i]&&i||n},require.relative=function(e,t){return function(n){if("."!=n.charAt(0)){return require(n,t,e)}var r=e.split("https://web.archive.org/"),i=n.split("https://web.archive.org/");r.pop();for(var s=0;s<i.length;s++){var o=i[s];".."==o?r.pop():"."!=o&&r.push(o)}return require(r.join("https://web.archive.org/"),t,e)}};require.m=[];require.m[0]={"index.js":function(module,exports,require){function M(){this._events={}}M.prototype={on:function(ev,cb){this._events||(this._events={});var e=this._events;(e[ev]||(e[ev]=[])).push(cb);return this},removeListener:function(ev,cb){var e=this._events[ev]||[],i;for(i=e.length-1;i>=0&&e[i];i--){if(e[i]===cb||e[i].cb===cb){e.splice(i,1)}}},removeAllListeners:function(ev){if(!ev){this._events={}}else{this._events[ev]&&(this._events[ev]=[])}},emit:function(ev){this._events||(this._events={});var args=Array.prototype.slice.call(arguments,1),i,e=this._events[ev]||[];for(i=e.length-1;i>=0&&e[i];i--){e[i].apply(this,args)}return this},when:function(ev,cb){return this.once(ev,cb,true)},once:function(ev,cb,when){if(!cb){return this}function c(){if(!when){this.removeListener(ev,c)}if(cb.apply(this,arguments)&&when){this.removeListener(ev,c)}}c.cb=cb;this.on(ev,c);return this}};M.mixin=function(dest){var o=M.prototype,k;for(k in o){o.hasOwnProperty(k)&&(dest.prototype[k]=o[k])}};module.exports=M}};MicroEE=require("index.html")}());!function(module){var StateMachine=StateMachine=module.exports={VERSION:"2.2.0",Result:{SUCCEEDED:1,NOTRANSITION:2,CANCELLED:3,PENDING:4},Error:{INVALID_TRANSITION:100,PENDING_TRANSITION:200,INVALID_CALLBACK:300},WILDCARD:"*",ASYNC:"async",create:function(cfg,target){var initial=(typeof cfg.initial=="string")?{state:cfg.initial}:cfg.initial;var terminal=cfg.terminal||cfg["final"];var fsm=target||cfg.target||{};var events=cfg.events||[];var callbacks=cfg.callbacks||{};var map={};var name;var add=function(e){var from=(e.from instanceof Array)?e.from:(e.from?[e.from]:[StateMachine.WILDCARD]);map[e.name]=map[e.name]||{};for(var n=0;n<from.length;n++){map[e.name][from[n]]=e.to||from[n]}};if(initial){initial.event=initial.event||"startup";add({name:initial.event,from:"none",to:initial.state})}for(var n=0;n<events.length;n++){add(events[n])}for(name in map){if(map.hasOwnProperty(name)){fsm[name]=StateMachine.buildEvent(name,map[name])}}for(name in callbacks){if(callbacks.hasOwnProperty(name)){fsm[name]=callbacks[name]}}fsm.current="none";fsm.is=function(state){return(state instanceof Array)?(state.indexOf(this.current)>=0):(this.current===state)};fsm.can=function(event){return !this.transition&&(map[event].hasOwnProperty(this.current)||map[event].hasOwnProperty(StateMachine.WILDCARD))};fsm.cannot=function(event){return !this.can(event)};fsm.error=cfg.error||function(name,from,to,args,error,msg,e){throw e||msg};fsm.isFinished=function(){return this.is(terminal)};if(initial&&!initial.defer){fsm[initial.event]()}return fsm},doCallback:function(fsm,func,name,from,to,args){if(func){try{return func.apply(fsm,[name,from,to].concat(args))}catch(e){return fsm.error(name,from,to,args,StateMachine.Error.INVALID_CALLBACK,"an exception occurred in a caller-provided callback function",e)}}},beforeAnyEvent:function(fsm,name,from,to,args){return StateMachine.doCallback(fsm,fsm.onbeforeevent,name,from,to,args)},afterAnyEvent:function(fsm,name,from,to,args){return StateMachine.doCallback(fsm,fsm.onafterevent||fsm.onevent,name,from,to,args)},leaveAnyState:function(fsm,name,from,to,args){return StateMachine.doCallback(fsm,fsm.onleavestate,name,from,to,args)},enterAnyState:function(fsm,name,from,to,args){return StateMachine.doCallback(fsm,fsm.onenterstate||fsm.onstate,name,from,to,args)},changeState:function(fsm,name,from,to,args){return StateMachine.doCallback(fsm,fsm.onchangestate,name,from,to,args)},beforeThisEvent:function(fsm,name,from,to,args){return StateMachine.doCallback(fsm,fsm["onbefore"+name],name,from,to,args)},afterThisEvent:function(fsm,name,from,to,args){return StateMachine.doCallback(fsm,fsm["onafter"+name]||fsm["on"+name],name,from,to,args)},leaveThisState:function(fsm,name,from,to,args){return StateMachine.doCallback(fsm,fsm["onleave"+from],name,from,to,args)},enterThisState:function(fsm,name,from,to,args){return StateMachine.doCallback(fsm,fsm["onenter"+to]||fsm["on"+to],name,from,to,args)},beforeEvent:function(fsm,name,from,to,args){if((false===StateMachine.beforeThisEvent(fsm,name,from,to,args))||(false===StateMachine.beforeAnyEvent(fsm,name,from,to,args))){return false}},afterEvent:function(fsm,name,from,to,args){StateMachine.afterThisEvent(fsm,name,from,to,args);StateMachine.afterAnyEvent(fsm,name,from,to,args)},leaveState:function(fsm,name,from,to,args){var specific=StateMachine.leaveThisState(fsm,name,from,to,args),general=StateMachine.leaveAnyState(fsm,name,from,to,args);if((false===specific)||(false===general)){return false}else{if((StateMachine.ASYNC===specific)||(StateMachine.ASYNC===general)){return StateMachine.ASYNC}}},enterState:function(fsm,name,from,to,args){StateMachine.enterThisState(fsm,name,from,to,args);StateMachine.enterAnyState(fsm,name,from,to,args)},buildEvent:function(name,map){return function(){var from=this.current;var to=map[from]||map[StateMachine.WILDCARD]||from;var args=Array.prototype.slice.call(arguments);if(this.transition){return this.error(name,from,to,args,StateMachine.Error.PENDING_TRANSITION,"event "+name+" inappropriate because previous transition did not complete")}if(this.cannot(name)){return this.error(name,from,to,args,StateMachine.Error.INVALID_TRANSITION,"event "+name+" inappropriate in current state "+this.current)}if(false===StateMachine.beforeEvent(this,name,from,to,args)){return StateMachine.Result.CANCELLED}if(from===to){StateMachine.afterEvent(this,name,from,to,args);return StateMachine.Result.NOTRANSITION}var fsm=this;this.transition=function(){fsm.transition=null;fsm.current=to;StateMachine.enterState(fsm,name,from,to,args);StateMachine.changeState(fsm,name,from,to,args);StateMachine.afterEvent(fsm,name,from,to,args);return StateMachine.Result.SUCCEEDED};this.transition.cancel=function(){fsm.transition=null;StateMachine.afterEvent(fsm,name,from,to,args)};var leave=StateMachine.leaveState(this,name,from,to,args);if(false===leave){this.transition=null;return StateMachine.Result.CANCELLED}else{if(StateMachine.ASYNC===leave){return StateMachine.Result.PENDING}else{if(this.transition){return this.transition()}}}}}}}(m);StateMachine=m.exports;(function(){function require(e,t,n){t||(t=0);var r=require.resolve(e,t),i=require.m[t][r];if(!i){throw new Error('failed to require "'+e+'" from '+n)}if(i.c){t=i.c,r=i.m,i=require.m[t][i.m];if(!i){throw new Error('failed to require "'+r+'" from '+t)}}return i.exports||(i.exports={},i.call(i.exports,i,i.exports,require.relative(r,t))),i.exports}require.resolve=function(e,t){var n=e,r=e+".js",i=e+"/index.js";return require.m[t][r]&&r||require.m[t][i]&&i||n},require.relative=function(e,t){return function(n){if("."!=n.charAt(0)){return require(n,t,e)}var r=e.split("https://web.archive.org/"),i=n.split("https://web.archive.org/");r.pop();for(var s=0;s<i.length;s++){var o=i[s];".."==o?r.pop():"."!=o&&r.push(o)}return require(r.join("https://web.archive.org/"),t,e)}};require.m=[];require.m[0]={sfsm:{exports:StateMachine},minilog:{exports:Minilog},microee:{exports:MicroEE},"engine.io-client":{exports:eio},"lib/index.js":function(module,exports,require){var Client=require("./radar_client"),instance=new Client(),Backoff=require("backoff.html");instance._log=require("minilog");instance.Backoff=Backoff;module.exports=instance},"lib/scope.js":function(module,exports,require){function Scope(prefix,client){this.prefix=prefix;this.client=client}var props=["set","get","subscribe","unsubscribe","publish","sync","on","once","when","removeListener","removeAllListeners"];var init=function(name){Scope.prototype[name]=function(){var args=Array.prototype.slice.apply(arguments);args.unshift(this.prefix);this.client[name].apply(this.client,args);return this}};for(var i=0;i<props.length;i++){init(props[i])}module.exports=Scope},"lib/state.js":function(module,exports,require){var log=require("minilog")("radar_state"),MicroEE=require("microee"),Backoff=require("./backoff"),Machine=require("sfsm");function create(){var backoff=new Backoff(),machine=Machine.create({error:function(name,from,to,args,type,message,err){log.warn("state-machine-error",arguments);if(err){throw err}},events:[{name:"connect",from:["opened","disconnected"],to:"connecting"},{name:"established",from:"connecting",to:"connected"},{name:"authenticate",from:"connected",to:"authenticating"},{name:"activate",from:["authenticating","activated"],to:"activated"},{name:"disconnect",from:Machine.WILDCARD,to:"disconnected"},{name:"close",from:Machine.WILDCARD,to:"closed"},{name:"open",from:["none","closed"],to:"opened"}],callbacks:{onevent:function(event,from,to){log.debug("before-"+event+", from: "+from+", to: "+to,Array.prototype.slice.call(arguments));this.emit("event",event);this.emit(event,arguments)},onstate:function(event,from,to){log.debug("event-state-"+event+", from: "+from+", to: "+to,Array.prototype.slice.call(arguments));this.emit("enterState",to);this.emit(to,arguments)},onconnecting:function(){this.startGuard()},onestablished:function(){this.cancelGuard();backoff.success();this.authenticate()},onclose:function(){this.cancelGuard()},ondisconnected:function(event,from,to){backoff.increment();if(this._timer){clearTimeout(this._timer);delete this._timer}this._timer=setTimeout(function(){delete machine._timer;if(machine.is("disconnected")){machine.connect()}},backoff.get());if(backoff.isUnavailable()){this.emit("unavailable")}}}});machine._backoff=backoff;machine._connectTimeout=10000;for(var property in MicroEE.prototype){if(MicroEE.prototype.hasOwnProperty(property)){machine[property]=MicroEE.prototype[property]}}machine.open();machine.start=function(){if(this.is("closed")){this.open()}if(this.is("activated")){this.activate()}else{this.connectWhenAble()}};machine.startGuard=function(){machine.cancelGuard();machine._guard=setTimeout(function(){log.info("startGuard: disconnect from timeout");machine.disconnect()},machine._connectTimeout)};machine.cancelGuard=function(){if(machine._guard){clearTimeout(machine._guard);delete machine._guard}};machine.connectWhenAble=function(){if(!(this.is("connected")||this.is("activated"))){if(this.can("connect")){this.connect()}else{this.once("enterState",function(){machine.connectWhenAble()})}}};return machine}module.exports={create:create}},"lib/backoff.js":function(module,exports,require){function Backoff(){this.failures=0}Backoff.durations=[1000,2000,4000,8000,16000,32000];Backoff.fallback=60000;Backoff.prototype.get=function(){return Backoff.durations[this.failures]||Backoff.fallback};Backoff.prototype.increment=function(){this.failures++};Backoff.prototype.success=function(){this.failures=0};Backoff.prototype.isUnavailable=function(){return Backoff.durations.length<=this.failures};module.exports=Backoff},"lib/radar_client.js":function(module,exports,require){var log=require("minilog")("radar_client"),MicroEE=require("microee"),eio=require("engine.io-client"),Scope=require("scope.html"),StateMachine=require("state.html");function Client(backend){var self=this;this._ackCounter=1;this._channelSyncTimes={};this._users={};this._presences={};this._subscriptions={};this._restoreRequired=false;this._queuedMessages=[];this._isConfigured=false;this.backend=backend||eio;this._createManager();this.configure(false);this.on("authenticateMessage",function(message){if(this._configuration){message.userData=this._configuration.userData;if(this._configuration.auth){message.auth=this._configuration.auth;message.userId=this._configuration.userId;message.userType=this._configuration.userType;message.accountName=this._configuration.accountName}}this.emit("messageAuthenticated",message)});this.on("messageAuthenticated",function(message){this._sendMessage(message)})}MicroEE.mixin(Client);Client.prototype.alloc=function(name,callback){log.info({op:"alloc",name:name});var self=this;this._users[name]=true;callback&&this.once("ready",function(){if(self._users.hasOwnProperty(name)){callback()}});if(this._isConfigured){this.manager.start()}else{this._waitingForConfigure=true}return this};Client.prototype.dealloc=function(name){log.info({op:"dealloc",name:name});delete this._users[name];var stillAllocated=false,key;for(key in this._users){if(this._users.hasOwnProperty(key)){stillAllocated=true;break}}if(!stillAllocated){this.manager.close()}};Client.prototype.currentState=function(){return this.manager.current};Client.prototype.configure=function(hash){var configuration=hash||this._configuration||{accountName:"",userId:0,userType:0};configuration.userType=configuration.userType||0;this._configuration=this._me=configuration;this._isConfigured=this._isConfigured||!!hash;if(this._isConfigured&&this._waitingForConfigure){this._waitingForConfigure=false;this.manager.start()}return this};Client.prototype.configuration=function(name){return name in this._configuration?JSON.parse(JSON.stringify(this._configuration[name])):null};Client.prototype.currentClientId=function(){return this._socket&&this._socket.id};Client.prototype.message=function(scope){return new Scope("message:/"+this._configuration.accountName+"/"+scope,this)};Client.prototype.presence=function(scope){return new Scope("presence:/"+this._configuration.accountName+"/"+scope,this)};Client.prototype.status=function(scope){return new Scope("status:/"+this._configuration.accountName+"/"+scope,this)};Client.prototype.set=function(scope,value,callback){return this._write({op:"set",to:scope,value:value,key:this._configuration.userId,type:this._configuration.userType},callback)};Client.prototype.publish=function(scope,value,callback){return this._write({op:"publish",to:scope,value:value},callback)};Client.prototype.subscribe=function(scope,callback){return this._write({op:"subscribe",to:scope},callback)};Client.prototype.unsubscribe=function(scope,callback){return this._write({op:"unsubscribe",to:scope},callback)};var init=function(name){Client.prototype[name]=function(scope,options,callback){var message={op:name,to:scope};if(typeof options=="function"){callback=options}else{message.options=options}if(name=="sync"&&!message.options&&scope.match(/^presence.+/)){this.once(scope,callback)}else{this.when("get",function(message){if(!message||!message.to||message.to!=scope){return false}if(callback){callback(message)}return true})}return this._write(message)}};var props=["get","sync"];for(var i=0;i<props.length;i++){init(props[i])}Client.prototype._write=function(message,callback){if(callback){message.ack=this._ackCounter++;this.when("ack",function(m){if(!m||!m.value||m.value!=message.ack){return false}callback(message);return true})}this.emit("authenticateMessage",message);return this};Client.prototype._batch=function(message){if(!(message.to&&message.value&&message.time)){return false}var index=0,data,time,length=message.value.length,newest=message.time,current=this._channelSyncTimes[message.to]||0;for(;index<length;index=index+2){data=JSON.parse(message.value[index]);time=message.value[index+1];if(time>current){this.emit(message.to,data)}if(time>newest){newest=time}}this._channelSyncTimes[message.to]=newest};Client.prototype._createManager=function(){var client=this,manager=this.manager=StateMachine.create();manager.on("enterState",function(state){client.emit(state)});manager.on("event",function(event){client.emit(event)});manager.on("connect",function(data){var socket=client._socket=new client.backend.Socket(client._configuration);socket.once("open",function(){log.info("socket open",socket.id);manager.established()});socket.once("close",function(reason,description){log.info("socket closed",socket.id,reason,description);socket.removeAllListeners("message");client._socket=null;if(socket.transport){socket.transport.close()}if(!manager.is("closed")){manager.disconnect()}});socket.on("message",function(message){client._messageReceived(message)});manager.removeAllListeners("close");manager.once("close",function(){socket.close()})});manager.on("activate",function(){client._restore();client.emit("ready")});manager.on("authenticate",function(){manager.activate()});manager.on("disconnect",function(){client._restoreRequired=true})};Client.prototype._memorize=function(message){switch(message.op){case"unsubscribe":if(this._subscriptions[message.to]){delete this._subscriptions[message.to]}return true;case"sync":case"subscribe":if(this._subscriptions[message.to]!="sync"){this._subscriptions[message.to]=message.op}return true;case"set":if(message.to.substr(0,"presence:/".length)=="presence:/"){this._presences[message.to]=message.value;return true}}return false};Client.prototype._restore=function(){var item,i,to,message;if(this._restoreRequired){this._restoreRequired=false;log.info("restore-subscriptions");for(to in this._subscriptions){if(this._subscriptions.hasOwnProperty(to)){item=this._subscriptions[to];this[item](to)}}for(to in this._presences){if(this._presences.hasOwnProperty(to)){this.set(to,this._presences[to])}}while(this._queuedMessages.length){this._write(this._queuedMessages.shift())}}};Client.prototype._sendMessage=function(message){var memorized=this._memorize(message);if(this._socket&&this.manager.is("activated")){this._socket.sendPacket("message",JSON.stringify(message))}else{if(this._isConfigured){this._restoreRequired=true;if(!memorized||message.ack){this._queuedMessages.push(message)}this.manager.connectWhenAble()}}};Client.prototype._messageReceived=function(msg){var message=JSON.parse(msg);message.direction="in";log.info(message);switch(message.op){case"err":case"ack":case"get":this.emit(message.op,message);break;case"sync":this._batch(message);break;default:this.emit(message.to,message)}};Client.setBackend=function(lib){eio=lib};module.exports=Client}};RadarClient=require("lib/index.html")}());(function(){function require(e,t,n){t||(t=0);var r=require.resolve(e,t),i=require.m[t][r];if(!i){throw new Error('failed to require "'+e+'" from '+n)}if(i.c){t=i.c,r=i.m,i=require.m[t][i.m];if(!i){throw new Error('failed to require "'+r+'" from '+t)}}return i.exports||(i.exports={},i.call(i.exports,i,i.exports,require.relative(r,t))),i.exports}require.resolve=function(e,t){var n=e,r=e+".js",i=e+"/index.js";return require.m[t][r]&&r||require.m[t][i]&&i||n},require.relative=function(e,t){return function(n){if("."!=n.charAt(0)){return require(n,t,e)}var r=e.split("https://web.archive.org/"),i=n.split("https://web.archive.org/");r.pop();for(var s=0;s<i.length;s++){var o=i[s];".."==o?r.pop():"."!=o&&r.push(o)}return require(r.join("https://web.archive.org/"),t,e)}};require.m=[];require.m[0]={minilog:{exports:Minilog},jquery:{exports:jQuery},radar_client:{exports:RadarClient},"engine.io-client":{exports:eio_079},"wrapper.js":function(module,exports,require){var radarClientInstance=require("radar_client"),RadarClient=radarClientInstance.constructor,logger=radarClientInstance._log("zendesk_radar_client:wrapper"),Retriever=require("retriever.html"),eio_079=require("engine.io-client"),root=typeof window=="undefined"?global:window;RadarClient.prototype.getRetriever=function(){if(root.RADAR_CLIENT_DEBUGGING){if(root.alert){root.alert("You should not be accessing Zendesk's RadarClient internals unless you are debugging")}return this._retriever}};RadarClient.prototype._configListeners=function(){var self=this;if(!this._retriever){this.Backoff=radarClientInstance.Backoff;this._log=radarClientInstance._log;this._retriever=new Retriever(this);this.on("err",function(message){if(message.value=="auth"&&self._retriever.lastTry<self._retriever.tenMinutesAgo()){logger.debug("Calling getConfiguration");self._retriever.expireToken(0);self._retriever.getConfiguration()}});this.manager.removeAllListeners("authenticate");this.manager.on("authenticate",function authenticated(){self._retriever.getConfiguration("activateRadarClient")});this.removeAllListeners("authenticateMessage");this.on("authenticateMessage",function authenticateMessage(message){self._retriever.getConfiguration("authenticateMessage",[message])})}};RadarClient.prototype.detach=function(){logger.info({action:"detach"});if(arguments.length){logger.error({detach:Array.prototype.slice(arguments)})}this._retriever.configuration.auth="";this._isConfigured=false;this._restoreRequired=true;this._waitingForConfigure=true;this.manager.close()};RadarClient.prototype.reattach=function(done){this._retriever.getConfiguration("reattach",[done])};var oldConfigure=RadarClient.prototype.configure;RadarClient.prototype.configure=function(conf){if((conf&&conf.engineio_079)||(conf&&typeof conf.engineio_079===undefined&&this._configuration&&this._configuration.engineio_079)){this.backend=eio_079;conf.path="/engine.io-0.7.9"}return oldConfigure.call(this,conf)};RadarClient.prototype.setAPIHost=function(apiHost){this._apiHost=apiHost};RadarClient.prototype.initialize=function(done){if(this.initialized){this._retriever.getConfiguration("whenReady",[done])}else{this._configListeners();this.initialized=true;this.Backoff.fallback=600000;this.Backoff.durations=[10000,60000,120000,300000];this._retriever.initializing=true;this._retriever.apiHost=this._apiHost;this._retriever.getConfiguration("initialize",[done])}};RadarClient.Retriever=Retriever;var radarClient=new RadarClient();root.radarClient={main:function(){return radarClient}};module.exports=radarClient},"retriever.js":function(module,exports,require){var immediate=typeof setImmediate=="undefined"?function(fn){return setTimeout(fn,1)}:setImmediate,slice=Array.prototype.slice,bind=function(fn,context){if(fn.bind){return fn.bind.apply(fn,slice.call(arguments,1))}var args=slice.call(arguments,2);return function(){return fn.apply(context,args.concat(slice.call(arguments,0)))}};function Retriever(radarClient){this.logger=radarClient._log("zendesk_radar_client:retriever");this.radarClient=radarClient;this.apiHost=null;this.listeners=[];this.configuration={};this.lastTry=0;this.lastRetrieval=0;this.retrieving=false;this.waiting=false;this.tenMinutes=10*60*1000;this.backoff=new radarClient.Backoff();this.now=function(){return Date.now?Date.now():new Date().getTime()}}Retriever.prototype.getConfiguration=function(method,args){this.logger.debug("getConfiguration",method,args);this.listeners.push({method:method||"empty",args:args||[]});if(this.isExpired()){this._retrieveConfiguration()}else{this._scheduleListeners()}};Retriever.prototype._scheduleListeners=function(){var listeners=this.listeners;this.listeners=[];immediate(bind(this._processListeners,this,listeners))};Retriever.prototype._processListeners=function(listeners){this.logger.debug("in _processListeners");while(listeners.length){var listener=listeners.shift();this.logger.debug("processListeners: callback "+listener.method);this[listener.method].apply(this,listener.args)}};Retriever.prototype._retrieveConfiguration=function(){this.logger.debug("retrieveConfiguration",this.retrieving,this.waiting);if(!this.retrieving&&!this.waiting){this.retrieving=true;this._contactAPI(bind(this.onRetrieved,this))}};Retriever.prototype._contactAPI=function(done){var host="",options={dataType:"json",cache:false};if(location.protocol!="31328550-ROBLOX-Rules-of-Conduct.html"){if(!this.apiHost&&this.radarClient.configuration("accountName")){this.apiHost=this.radarClient.configuration("accountName")+(/^[\w-]+(\..*)$/.test(this.radarClient.configuration("host"))?RegExp.$1:".zendesk.com")}if(this.apiHost){host="https://"+this.apiHost}else{this.logger.warn("Warning: no apiHost found for http site, falling back to location.host");host="https://"+location.host}options.xhrFields={withCredentials:true};options.crossDomain=true}options.url=host+"/api/v2/users/radar_token.json";this.logger.debug("contactAPI",options);require("jquery").ajax(options).always(done)};Retriever.prototype.expireToken=function(time,token){this.lastRetrieval=time!==undefined?time:this.lastRetrieval;if(token){this.configuration.auth=token}else{delete this.configuration.auth}};Retriever.prototype.isExpired=function(){return !this.configuration.auth||this.lastRetrieval<this.tenMinutesAgo()};Retriever.prototype.tenMinutesAgo=function(){return this.now()-this.tenMinutes};Retriever.prototype.onRetrieved=function(configuration,status){this.logger.debug("onRetrieved",status,configuration);this.retrieving=false;if(status=="success"&&configuration.auth){this.backoff.success();this.lastRetrieval=this.now();this.configuration=configuration;var server=configuration.servers&&configuration.servers[Math.floor(Math.random()*configuration.servers.length)];this.configuration.host=configuration.host||server.host;this.configuration.port=configuration.port||server.port;this.radarClient._configuration.auth=configuration.auth;if(!this.initializing&&configuration.userType!=this.radarClient.configuration("userType")){this.lastRetrieval=0;return this.radarClient.detach("userType mismatch",configuration.userType,this.radarClient.configuration("userType"))}if(!this.initializing&&configuration.userId!=this.radarClient.configuration("userId")){this.logger.error("Non-matching userId",configuration.userId,this.radarClient.configuration("userId"))}this.logger.debug("scheduling processListeners from onRetrieved");this._scheduleListeners()}else{this.waiting=true;setTimeout(bind(this.delayed,this),this.backoff.get());this.backoff.increment()}};Retriever.prototype.delayed=function(){this.logger.debug("delayed");this.waiting=false;this._retrieveConfiguration()};Retriever.prototype.authenticateMessage=function(message){this.logger.debug("Retriever.authenticateMessage",message);message.auth=this.radarClient.configuration("auth");message.userId=this.radarClient.configuration("userId");message.userType=this.radarClient.configuration("userType");message.accountName=this.radarClient.configuration("accountName");message.section=this.radarClient.configuration("section");message.userData=this.radarClient.configuration("userData");this.logger.debug("emit messageAuthenticated",message);this.radarClient.emit("messageAuthenticated",message)};Retriever.prototype.empty=function(){};Retriever.prototype.activateRadarClient=function(){this.radarClient.manager.activate()};Retriever.prototype.reattach=function(done){this.initializing=false;if(done){this.radarClient.once("ready",done)}this.radarClient.configure(this.configuration)};Retriever.prototype.initialize=function(done){this.initializing=false;this.radarClient.configure(this.configuration);if(done){done()}};Retriever.prototype.whenReady=function(done){done()};module.exports=Retriever}};window.ZendeskRadarClient=window.RadarClient=ZRC=require("wrapper.html")}());(function(){function require(e,t,n){t||(t=0);var r=require.resolve(e,t),i=require.m[t][r];if(!i){throw new Error('failed to require "'+e+'" from '+n)}if(i.c){t=i.c,r=i.m,i=require.m[t][i.m];if(!i){throw new Error('failed to require "'+r+'" from '+t)}}return i.exports||(i.exports={},i.call(i.exports,i,i.exports,require.relative(r,t))),i.exports}require.resolve=function(e,t){var n=e,r=e+".js",i=e+"/index.js";return require.m[t][r]&&r||require.m[t][i]&&i||n},require.relative=function(e,t){return function(n){if("."!=n.charAt(0)){return require(n,t,e)}var r=e.split("https://web.archive.org/"),i=n.split("https://web.archive.org/");r.pop();for(var s=0;s<i.length;s++){var o=i[s];".."==o?r.pop():"."!=o&&r.push(o)}return require(r.join("https://web.archive.org/"),t,e)}};require.m=[];require.m[0]={minilog:{exports:Minilog},"index.js":function(module,exports,require){module.exports=function(fn,name,message){var error=new Error(message||"tracable-stack-trace");error.name=name||"TracableStackTrace";return function(){try{return fn.apply(this,arguments)}catch(e){console.error("(tracable-stack-trace)",error.stack);throw e}}}}};ZRC.Tracable=require("index.html")}());(function(){function require(e,t,n){t||(t=0);var r=require.resolve(e,t),i=require.m[t][r];if(!i){throw new Error('failed to require "'+e+'" from '+n)}if(i.c){t=i.c,r=i.m,i=require.m[t][i.m];if(!i){throw new Error('failed to require "'+r+'" from '+t)}}return i.exports||(i.exports={},i.call(i.exports,i,i.exports,require.relative(r,t))),i.exports}require.resolve=function(e,t){var n=e,r=e+".js",i=e+"/index.js";return require.m[t][r]&&r||require.m[t][i]&&i||n},require.relative=function(e,t){return function(n){if("."!=n.charAt(0)){return require(n,t,e)}var r=e.split("https://web.archive.org/"),i=n.split("https://web.archive.org/");r.pop();for(var s=0;s<i.length;s++){var o=i[s];".."==o?r.pop():"."!=o&&r.push(o)}return require(r.join("https://web.archive.org/"),t,e)}};require.m=[];require.m[0]={minilog:{exports:Minilog},"index.js":function(module,exports,require){var Tracker={create:function(name,done){var tracker=function(subname,handler){++tracker.outstanding;var subtracker=function(){Tracker.logger.debug("subtracker",subname,"is done");if(subtracker.handler){subtracker.handler.apply(this,arguments)}tracker.complete()};subtracker.handler=handler;return subtracker};tracker.outstanding=0;tracker.done=done;tracker.complete=function(){Tracker.logger.debug("complete",name,tracker.outstanding);if(--tracker.outstanding<1&&tracker.done){tracker.done()}};return tracker},logger:require("minilog")("tracker")};module.exports=Tracker}};ZRC.Tracker=require("index.html")}())}();

}
/*
     FILE ARCHIVED ON 16:46:14 May 15, 2014 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 19:00:02 Aug 06, 2020.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  exclusion.robots: 0.219
  captures_list: 3282.94
  LoadShardBlock: 3217.647 (3)
  RedisCDXSource: 30.91
  load_resource: 883.46
  exclusion.robots.policy: 0.204
  CDXLines.iter: 22.509 (3)
  PetaboxLoader3.datanode: 3658.983 (5)
  PetaboxLoader3.resolve: 411.255 (3)
  esindex: 0.014
*/